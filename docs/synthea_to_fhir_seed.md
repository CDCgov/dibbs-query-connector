# Description

This document goes over the process of seeding data generated by Synthea into the Azure FHIR API service.

# Requirements

- Synthea [Synthea](https://github.com/synthetichealth/synthea)
- FhirLoader [FhirLoader](https://github.com/hansenms/FhirLoader)

The FhirLoader requires the .NET core 3.1 which can be downloaded for [here](https://dotnet.microsoft.com/en-us/download/dotnet/3.1)

- ClientID, ClientSecret, TenantID, FHIR API URL


# Background

The Azure FHIR API does not accept transaction based bundles, which is what synthea generates. The FhirLoader converts the bundles into the appropriate format, and uploads them to your FHIR API Server

# Steps

- Generate fake data via synthea 
    - If you have cloned the repo `./run_synthea -m covid-19 -p 1000` will generate 1000 patients with the covid module, providing some covid based information.
    - You can also run synthea via the jar file `java -jar synthea-with-dependencies.jar -m covid-19 -p 1000` more detailed synthea run instructions can be found at their [wiki](https://github.com/synthetichealth/synthea/wiki/Basic-Setup-and-Running)
- Run FhirLoader with the fake data generated:
    - Example: 
    
  ```  dotnet run -- --client-secret "XXXX" --client-id "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" --input-folder ..\synthea\output\fhir\ --authority "https://login.microsoftonline.com/{tenant-id}" --fhir-server-url "https://{myfhirserver}.azurehealthcareapis.com" --max-degree-of-parallelism 14```
    

    This command can be ran by cloning the repo onto your machine and running it from the FhirLoader directory.

- If all is successful you should see your patient count increase on your FHIR Server by hitting the `{{fhirurl}}/Patient?_summary=count` endpoint
    